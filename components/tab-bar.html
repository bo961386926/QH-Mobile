<!-- 底部导航栏组件 -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-200 z-50">
    <style>
        .ios-nav-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            color: #8E8E93; /* 默认灰色 */
            transition: color 0.2s ease;
        }
        .ios-nav-item.active {
            color: #007AFF; /* 激活状态使用主题蓝色 */
        }
        .ios-nav-item i {
            font-size: 20px;
        }
        .ios-nav-item span {
            font-size: 12px;
            margin-left: 4px;
        }
    </style>
    <div class="flex justify-around">
        <div class="ios-nav-item" data-page="home">
            <i class="fa fa-home text-lg"></i>
            <span class="text-xs ml-1">首页</span>
        </div>
        <div class="ios-nav-item" data-page="monitor">
            <i class="fa fa-television text-lg"></i>
            <span class="text-xs ml-1">监控</span>
        </div>
        <div class="ios-nav-item" data-page="operation">
            <i class="fa fa-wrench text-lg"></i>
            <span class="text-xs ml-1">运维</span>
        </div>
        <div class="ios-nav-item" data-page="monitor2">
            <i class="fa fa-television text-lg"></i>
            <span class="text-xs ml-1">监控</span>
        </div>
        <div class="ios-nav-item" data-page="profile">
            <i class="fa fa-user-o text-lg"></i>
            <span class="text-xs ml-1">我的</span>
        </div>
    </div>
</nav>

<script>
    // 页面切换功能
    function initTabBar() {
        // 获取当前页面文件名
        const currentPage = window.location.pathname.split('/').pop().replace('.html', '');
        const pageMap = {
            '农饮水运维移动端': 'home',
            '监控中心': 'monitor',
            '运维中心': 'operation',
            '报表中心': 'report',
            '个人中心': 'profile'
        };
        const currentTab = pageMap[currentPage] || 'home';
        
        // 设置当前页面对应的导航项为激活状态
        document.querySelectorAll('.ios-nav-item').forEach(tab => {
            tab.classList.remove('active');
            const tabPage = tab.getAttribute('data-page');
            // 如果是监控中心页面，让两个监控项都显示为激活状态
            if (currentTab === 'monitor' && (tabPage === 'monitor' || tabPage === 'monitor2')) {
                tab.classList.add('active');
            }
            // 其他页面正常处理
            else if (tabPage === currentTab) {
                tab.classList.add('active');
            }
        });
        
        // 添加点击事件监听器
        document.querySelectorAll('.ios-nav-item').forEach(item => {
            // 先移除可能已存在的事件监听器，避免重复绑定
            item.removeEventListener('click', handleNavClick);
            // 添加点击事件监听器
            item.addEventListener('click', handleNavClick);
        });
    }
    
    // 导航点击处理函数
    function handleNavClick(event) {
        // 阻止默认行为
        event.preventDefault();
        
        // 移除所有激活状态
        document.querySelectorAll('.ios-nav-item').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // 添加当前激活状态
        this.classList.add('active');
        
        // 页面跳转逻辑
        const page = this.getAttribute('data-page');
        switch(page) {
            case 'home':
                window.location.href = '农饮水运维移动端.html';
                break;
            case 'monitor':
            case 'monitor2':
                window.location.href = '监控中心.html';
                break;
            case 'operation':
                window.location.href = '运维中心.html';
                break;
            case 'report':
                window.location.href = '报表中心.html';
                break;
            case 'profile':
                window.location.href = '个人中心.html';
                break;
            default:
                console.log('切换到:', page);
        }
    }
    
    // 初始化底部导航栏
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initTabBar);
    } else {
        // 如果页面已经加载完成，直接初始化
        setTimeout(initTabBar, 0);
    }
</script>
